{"version":3,"sources":["@wordpress/block-library/src/column/edit.native.js"],"names":["View","withSelect","compose","withPreferredColorScheme","useEffect","InnerBlocks","BlockControls","BlockVerticalAlignmentToolbar","InspectorControls","PanelBody","RangeControl","FooterMessageControl","__","styles","ColumnsPreview","ColumnEdit","attributes","setAttributes","hasChildren","isSelected","getStylesFromColorScheme","isParentSelected","contentStyle","columns","columnCount","selectedColumnIndex","parentAlignment","verticalAlignment","updateAlignment","alignment","onWidthChange","width","columnWidths","map","column","parseFloat","columnPlaceholder","columnPlaceholderDark","columnPlaceholderNotSelected","innerBlocksBottomSpace","ButtonBlockAppender","ColumnEditWrapper","props","getVerticalAlignmentRemap","flexBase","select","clientId","getBlockCount","getBlockRootClientId","getSelectedBlockClientId","getBlocks","getBlockOrder","getBlockAttributes","selectedBlockClientId","parentId","blockOrder","indexOf"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { View } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { withSelect } from '@wordpress/data';\nimport { compose, withPreferredColorScheme } from '@wordpress/compose';\nimport { useEffect } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tBlockControls,\n\tBlockVerticalAlignmentToolbar,\n\tInspectorControls,\n} from '@wordpress/block-editor';\nimport {\n\tPanelBody,\n\tRangeControl,\n\tFooterMessageControl,\n} from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n/**\n * Internal dependencies\n */\nimport styles from './editor.scss';\nimport ColumnsPreview from './column-preview';\n\nfunction ColumnEdit( {\n\tattributes,\n\tsetAttributes,\n\thasChildren,\n\tisSelected,\n\tgetStylesFromColorScheme,\n\tisParentSelected,\n\tcontentStyle,\n\tcolumns,\n\tcolumnCount,\n\tselectedColumnIndex,\n\tparentAlignment,\n} ) {\n\tconst { verticalAlignment } = attributes;\n\n\tconst updateAlignment = ( alignment ) => {\n\t\tsetAttributes( { verticalAlignment: alignment } );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( ! verticalAlignment && parentAlignment ) {\n\t\t\tupdateAlignment( parentAlignment );\n\t\t}\n\t}, [] );\n\n\tconst onWidthChange = ( width ) => {\n\t\tsetAttributes( { width: `${ width }%` } );\n\t};\n\n\tconst columnWidths = columns.map(\n\t\t( column ) => parseFloat( column.attributes.width ) || 100 / columnCount\n\t);\n\n\tif ( ! isSelected && ! hasChildren ) {\n\t\treturn (\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\t! isParentSelected &&\n\t\t\t\t\t\tgetStylesFromColorScheme(\n\t\t\t\t\t\t\tstyles.columnPlaceholder,\n\t\t\t\t\t\t\tstyles.columnPlaceholderDark\n\t\t\t\t\t\t),\n\t\t\t\t\tcontentStyle,\n\t\t\t\t\tstyles.columnPlaceholderNotSelected,\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t<BlockVerticalAlignmentToolbar\n\t\t\t\t\tonChange={ updateAlignment }\n\t\t\t\t\tvalue={ verticalAlignment }\n\t\t\t\t/>\n\t\t\t</BlockControls>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Column settings' ) }>\n\t\t\t\t\t<RangeControl\n\t\t\t\t\t\tlabel={ __( 'Width' ) }\n\t\t\t\t\t\tmin={ 1 }\n\t\t\t\t\t\tmax={ 100 }\n\t\t\t\t\t\tvalue={ columnWidths[ selectedColumnIndex ] }\n\t\t\t\t\t\tonChange={ onWidthChange }\n\t\t\t\t\t\tdecimalNum={ 1 }\n\t\t\t\t\t\trangePreview={\n\t\t\t\t\t\t\t<ColumnsPreview\n\t\t\t\t\t\t\t\tcolumnWidths={ columnWidths }\n\t\t\t\t\t\t\t\tselectedColumnIndex={ selectedColumnIndex }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t\t<PanelBody>\n\t\t\t\t\t<FooterMessageControl\n\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t'Note: Column layout may vary between themes and screen sizes'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<View\n\t\t\t\tstyle={ [\n\t\t\t\t\tcontentStyle,\n\t\t\t\t\tisSelected && hasChildren && styles.innerBlocksBottomSpace,\n\t\t\t\t] }\n\t\t\t>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\trenderAppender={\n\t\t\t\t\t\tisSelected && InnerBlocks.ButtonBlockAppender\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</>\n\t);\n}\n\nfunction ColumnEditWrapper( props ) {\n\tconst { verticalAlignment } = props.attributes;\n\n\tconst getVerticalAlignmentRemap = ( alignment ) => {\n\t\tif ( ! alignment ) return styles.flexBase;\n\t\treturn {\n\t\t\t...styles.flexBase,\n\t\t\t...styles[ `is-vertically-aligned-${ alignment }` ],\n\t\t};\n\t};\n\n\treturn (\n\t\t<View style={ getVerticalAlignmentRemap( verticalAlignment ) }>\n\t\t\t<ColumnEdit { ...props } />\n\t\t</View>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst {\n\t\t\tgetBlockCount,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetSelectedBlockClientId,\n\t\t\tgetBlocks,\n\t\t\tgetBlockOrder,\n\t\t\tgetBlockAttributes,\n\t\t} = select( 'core/block-editor' );\n\n\t\tconst selectedBlockClientId = getSelectedBlockClientId();\n\t\tconst isSelected = selectedBlockClientId === clientId;\n\n\t\tconst parentId = getBlockRootClientId( clientId );\n\t\tconst hasChildren = !! getBlockCount( clientId );\n\t\tconst isParentSelected =\n\t\t\tselectedBlockClientId && selectedBlockClientId === parentId;\n\n\t\tconst blockOrder = getBlockOrder( parentId );\n\n\t\tconst selectedColumnIndex = blockOrder.indexOf( clientId );\n\t\tconst columnCount = getBlockCount( parentId );\n\t\tconst columns = getBlocks( parentId );\n\n\t\tconst parentAlignment = getBlockAttributes( parentId )\n\t\t\t?.verticalAlignment;\n\n\t\treturn {\n\t\t\thasChildren,\n\t\t\tisParentSelected,\n\t\t\tisSelected,\n\t\t\tselectedColumnIndex,\n\t\t\tcolumns,\n\t\t\tcolumnCount,\n\t\t\tparentAlignment,\n\t\t};\n\t} ),\n\twithPreferredColorScheme,\n] )( ColumnEditWrapper );\n"]}