{"version":3,"sources":["@wordpress/block-library/src/post-featured-image/edit.js"],"names":["useEntityProp","useSelect","Icon","ToggleControl","PanelBody","__","sprintf","postFeaturedImage","icon","InspectorControls","useBlockProps","placeholderChip","PostFeaturedImageDisplay","isLink","attributes","setAttributes","context","postId","postType","featuredImage","media","select","getMedia","image","source_url","alt_text","PostFeaturedImageEdit","props"],"mappings":";;;AAAA;;;AAGA,SAASA,aAAT,QAA8B,sBAA9B;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SAASC,IAAT,EAAeC,aAAf,EAA8BC,SAA9B,QAA+C,uBAA/C;AACA,SAASC,EAAT,EAAaC,OAAb,QAA4B,iBAA5B;AACA,SAASC,iBAAiB,IAAIC,IAA9B,QAA0C,kBAA1C;AACA,SAASC,iBAAT,EAA4BC,aAA5B,QAAiD,yBAAjD;AAEA,IAAMC,eAAe,GACpB;AAAK,EAAA,SAAS,EAAC;AAAf,GACC,cAAC,IAAD;AAAM,EAAA,IAAI,EAAGH;AAAb,EADD,EAEC,8BAAMH,EAAE,CAAE,gBAAF,CAAR,CAFD,CADD;;AAOA,SAASO,wBAAT,OAII;AAAA,MAHWC,MAGX,QAHHC,UAGG,CAHWD,MAGX;AAAA,MAFHE,aAEG,QAFHA,aAEG;AAAA,0BADHC,OACG;AAAA,MADQC,MACR,gBADQA,MACR;AAAA,MADgBC,QAChB,gBADgBA,QAChB;;AAAA,uBACuBlB,aAAa,CACtC,UADsC,EAEtCkB,QAFsC,EAGtC,gBAHsC,EAItCD,MAJsC,CADpC;AAAA;AAAA,MACKE,aADL;;AAOH,MAAMC,KAAK,GAAGnB,SAAS,CACtB,UAAEoB,MAAF;AAAA,WACCF,aAAa,IAAIE,MAAM,CAAE,MAAF,CAAN,CAAiBC,QAAjB,CAA2BH,aAA3B,CADlB;AAAA,GADsB,EAGtB,CAAEA,aAAF,CAHsB,CAAvB;AAKA,MAAMI,KAAK,GAAG,CAAEH,KAAF,GACbT,eADa,GAGb;AACC,IAAA,GAAG,EAAGS,KAAK,CAACI,UADb;AAEC,IAAA,GAAG,EAAGJ,KAAK,CAACK,QAAN,IAAkBpB,EAAE,CAAE,yBAAF;AAF3B,IAHD;AASA,SACC,8BACC,cAAC,iBAAD,QACC,cAAC,SAAD;AAAW,IAAA,KAAK,EAAGA,EAAE,CAAE,eAAF;AAArB,KACC,cAAC,aAAD;AACC,IAAA,KAAK,EAAGC,OAAO,EACd;AACAD,IAAAA,EAAE,CAAE,YAAF,CAFY,EAGda,QAHc,CADhB;AAMC,IAAA,QAAQ,EAAG;AAAA,aAAMH,aAAa,CAAE;AAAEF,QAAAA,MAAM,EAAE,CAAEA;AAAZ,OAAF,CAAnB;AAAA,KANZ;AAOC,IAAA,OAAO,EAAGA;AAPX,IADD,CADD,CADD,EAcC,qBAAUH,aAAa,EAAvB,EAA8Ba,KAA9B,CAdD,CADD;AAkBA;;AAED,eAAe,SAASG,qBAAT,CAAgCC,KAAhC,EAAwC;AAAA;;AACtD,MAAK,oBAAEA,KAAK,CAACX,OAAR,mDAAE,eAAeC,MAAjB,CAAL,EAA+B;AAC9B,WAAON,eAAP;AACA;;AACD,SAAO,cAAC,wBAAD,EAA+BgB,KAA/B,CAAP;AACA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useEntityProp } from '@wordpress/core-data';\nimport { useSelect } from '@wordpress/data';\nimport { Icon, ToggleControl, PanelBody } from '@wordpress/components';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { postFeaturedImage as icon } from '@wordpress/icons';\nimport { InspectorControls, useBlockProps } from '@wordpress/block-editor';\n\nconst placeholderChip = (\n\t<div className=\"post-featured-image_placeholder\">\n\t\t<Icon icon={ icon } />\n\t\t<p> { __( 'Featured Image' ) }</p>\n\t</div>\n);\n\nfunction PostFeaturedImageDisplay( {\n\tattributes: { isLink },\n\tsetAttributes,\n\tcontext: { postId, postType },\n} ) {\n\tconst [ featuredImage ] = useEntityProp(\n\t\t'postType',\n\t\tpostType,\n\t\t'featured_media',\n\t\tpostId\n\t);\n\tconst media = useSelect(\n\t\t( select ) =>\n\t\t\tfeaturedImage && select( 'core' ).getMedia( featuredImage ),\n\t\t[ featuredImage ]\n\t);\n\tconst image = ! media ? (\n\t\tplaceholderChip\n\t) : (\n\t\t<img\n\t\t\tsrc={ media.source_url }\n\t\t\talt={ media.alt_text || __( 'No alternative text set' ) }\n\t\t/>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<InspectorControls>\n\t\t\t\t<PanelBody title={ __( 'Link settings' ) }>\n\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\tlabel={ sprintf(\n\t\t\t\t\t\t\t// translators: %s: Name of the post type e.g: \"post\".\n\t\t\t\t\t\t\t__( 'Link to %s' ),\n\t\t\t\t\t\t\tpostType\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonChange={ () => setAttributes( { isLink: ! isLink } ) }\n\t\t\t\t\t\tchecked={ isLink }\n\t\t\t\t\t/>\n\t\t\t\t</PanelBody>\n\t\t\t</InspectorControls>\n\t\t\t<div { ...useBlockProps() }>{ image }</div>\n\t\t</>\n\t);\n}\n\nexport default function PostFeaturedImageEdit( props ) {\n\tif ( ! props.context?.postId ) {\n\t\treturn placeholderChip;\n\t}\n\treturn <PostFeaturedImageDisplay { ...props } />;\n}\n"]}