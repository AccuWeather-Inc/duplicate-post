{"version":3,"sources":["@wordpress/block-library/src/block/edit-panel/index.js"],"names":["Button","useInstanceId","usePrevious","useEffect","useRef","__","ReusableBlockEditPanel","isEditDisabled","isEditing","isSaving","onChangeTitle","onEdit","onSave","title","instanceId","titleField","editButton","wasEditing","wasSaving","current","select","focus","handleFormSubmit","event","preventDefault","handleTitleChange","target","value"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { Button } from '@wordpress/components';\nimport { useInstanceId, usePrevious } from '@wordpress/compose';\nimport { useEffect, useRef } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\n\n/** @typedef {import('@wordpress/element').WPComponent} WPComponent */\n\n/**\n * ReusableBlockEditPanel props.\n *\n * @typedef WPReusableBlockEditPanelProps\n *\n * @property {boolean}                 isEditDisabled Is editing the reusable\n *                                                    block disabled.\n * @property {boolean}                 isEditing      Is the reusable block\n *                                                    being edited.\n * @property {boolean}                 isSaving       Is the reusable block\n *                                                    being saved.\n * @property {()=>void}                onCancel       Callback to run when\n *                                                    editing is canceled.\n * @property {(newTitle:string)=>void} onChangeTitle  Callback to run when the\n *                                                    title input value is\n *                                                    changed.\n * @property {()=>void}                onEdit         Callback to run when\n *                                                    editing begins.\n * @property {()=>void}                onSave         Callback to run when\n *                                                    saving.\n * @property {string}                  title          Title of the reusable\n *                                                    block.\n */\n\n/**\n * Panel for enabling the editing and saving of a reusable block.\n *\n * @param {WPReusableBlockEditPanelProps} props Component props.\n *\n * @return {WPComponent} The panel.\n */\nexport default function ReusableBlockEditPanel( {\n\tisEditDisabled,\n\tisEditing,\n\tisSaving,\n\tonChangeTitle,\n\tonEdit,\n\tonSave,\n\ttitle,\n} ) {\n\tconst instanceId = useInstanceId( ReusableBlockEditPanel );\n\tconst titleField = useRef();\n\tconst editButton = useRef();\n\tconst wasEditing = usePrevious( isEditing );\n\tconst wasSaving = usePrevious( isSaving );\n\n\t// Select the title input when the form opens.\n\tuseEffect( () => {\n\t\tif ( ! wasEditing && isEditing ) {\n\t\t\ttitleField.current.select();\n\t\t}\n\t}, [ isEditing ] );\n\n\t// Move focus back to the Edit button after pressing the Escape key or Save.\n\tuseEffect( () => {\n\t\tif ( ( wasEditing || wasSaving ) && ! isEditing && ! isSaving ) {\n\t\t\teditButton.current.focus();\n\t\t}\n\t}, [ isEditing, isSaving ] );\n\n\tfunction handleFormSubmit( event ) {\n\t\tevent.preventDefault();\n\t\tonSave();\n\t}\n\n\tfunction handleTitleChange( event ) {\n\t\tonChangeTitle( event.target.value );\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{ ! isEditing && ! isSaving && (\n\t\t\t\t<div className=\"reusable-block-edit-panel\">\n\t\t\t\t\t<b className=\"reusable-block-edit-panel__info\">{ title }</b>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tref={ editButton }\n\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__button\"\n\t\t\t\t\t\tdisabled={ isEditDisabled }\n\t\t\t\t\t\tonClick={ onEdit }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Edit' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t{ ( isEditing || isSaving ) && (\n\t\t\t\t<form\n\t\t\t\t\tclassName=\"reusable-block-edit-panel\"\n\t\t\t\t\tonSubmit={ handleFormSubmit }\n\t\t\t\t>\n\t\t\t\t\t<label\n\t\t\t\t\t\thtmlFor={ `reusable-block-edit-panel__title-${ instanceId }` }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__label\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Name:' ) }\n\t\t\t\t\t</label>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref={ titleField }\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tdisabled={ isSaving }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__title\"\n\t\t\t\t\t\tvalue={ title }\n\t\t\t\t\t\tonChange={ handleTitleChange }\n\t\t\t\t\t\tid={ `reusable-block-edit-panel__title-${ instanceId }` }\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\tisBusy={ isSaving }\n\t\t\t\t\t\tdisabled={ ! title || isSaving }\n\t\t\t\t\t\tclassName=\"reusable-block-edit-panel__button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Save' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</form>\n\t\t\t) }\n\t\t</>\n\t);\n}\n"]}