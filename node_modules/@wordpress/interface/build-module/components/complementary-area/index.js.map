{"version":3,"sources":["@wordpress/interface/src/components/complementary-area/index.js"],"names":["classnames","Animate","Button","Panel","Slot","Fill","useDispatch","useSelect","__","check","starEmpty","starFilled","useEffect","useRef","ComplementaryAreaHeader","ComplementaryAreaToggle","withComplementaryAreaContext","PinnedItems","ComplementaryAreaSlot","scope","props","ComplementaryAreaFill","children","className","origin","useAdjustComplementaryListener","identifier","activeArea","isActive","isSmall","previousIsSmall","shouldOpenWhenNotSmall","enableComplementaryArea","disableComplementaryArea","current","ComplementaryArea","closeLabel","header","headerClassName","icon","isPinnable","panelClassName","smallScreenTitle","title","toggleShortcut","isActiveByDefault","showIconLabels","select","getActiveComplementaryArea","isItemPinned","_activeArea","isPinned","isViewportMatch","isLarge","pinItem","unpinItem","undefined","label","shortcut","ComplementaryAreaWrapped"],"mappings":";;;;AAAA;;;AAGA,OAAOA,UAAP,MAAuB,YAAvB;AAEA;;;;AAGA,SAASC,OAAT,EAAkBC,MAAlB,EAA0BC,KAA1B,EAAiCC,IAAjC,EAAuCC,IAAvC,QAAmD,uBAAnD;AACA,SAASC,WAAT,EAAsBC,SAAtB,QAAuC,iBAAvC;AACA,SAASC,EAAT,QAAmB,iBAAnB;AACA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,kBAA7C;AACA,SAASC,SAAT,EAAoBC,MAApB,QAAkC,oBAAlC;AAEA;;;;AAGA,OAAOC,uBAAP,MAAoC,8BAApC;AACA,OAAOC,uBAAP,MAAoC,8BAApC;AACA,OAAOC,4BAAP,MAAyC,+BAAzC;AACA,OAAOC,WAAP,MAAwB,iBAAxB;;AAEA,SAASC,qBAAT,OAAsD;AAAA,MAApBC,KAAoB,QAApBA,KAAoB;AAAA,MAAVC,KAAU;;AACrD,SAAO,cAAC,IAAD;AAAM,IAAA,IAAI,8BAAyBD,KAAzB;AAAV,KAAmDC,KAAnD,EAAP;AACA;;AAED,SAASC,qBAAT,QAAiE;AAAA,MAA/BF,KAA+B,SAA/BA,KAA+B;AAAA,MAAxBG,QAAwB,SAAxBA,QAAwB;AAAA,MAAdC,SAAc,SAAdA,SAAc;AAChE,SACC,cAAC,IAAD;AAAM,IAAA,IAAI,8BAAyBJ,KAAzB;AAAV,KACC,cAAC,OAAD;AAAS,IAAA,IAAI,EAAC,UAAd;AAAyB,IAAA,OAAO,EAAG;AAAEK,MAAAA,MAAM,EAAE;AAAV;AAAnC,KACG;AAAA,WAAM;AAAK,MAAA,SAAS,EAAGD;AAAjB,OAA+BD,QAA/B,CAAN;AAAA,GADH,CADD,CADD;AAOA;;AAED,SAASG,8BAAT,CACCN,KADD,EAECO,UAFD,EAGCC,UAHD,EAICC,QAJD,EAKCC,OALD,EAME;AACD,MAAMC,eAAe,GAAGjB,MAAM,CAAE,KAAF,CAA9B;AACA,MAAMkB,sBAAsB,GAAGlB,MAAM,CAAE,KAAF,CAArC;;AAFC,qBAG6DP,WAAW,CACxE,gBADwE,CAHxE;AAAA,MAGO0B,uBAHP,gBAGOA,uBAHP;AAAA,MAGgCC,wBAHhC,gBAGgCA,wBAHhC;;AAMDrB,EAAAA,SAAS,CAAE,YAAM;AAChB;AACA,QAAKgB,QAAQ,IAAIC,OAAZ,IAAuB,CAAEC,eAAe,CAACI,OAA9C,EAAwD;AACvD;AACAD,MAAAA,wBAAwB,CAAEd,KAAF,CAAxB,CAFuD,CAGvD;;AACAY,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,IAAjC;AACA,KALD,MAKO,KACN;AACA;AACAH,IAAAA,sBAAsB,CAACG,OAAvB,IACA,CAAEL,OADF,IAEAC,eAAe,CAACI,OALV,EAML;AACD;AACAH,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,KAAjC,CAFC,CAGD;;AACAF,MAAAA,uBAAuB,CAAEb,KAAF,EAASO,UAAT,CAAvB;AACA,KAXM,MAWA,KACN;AACA;AACAK,IAAAA,sBAAsB,CAACG,OAAvB,IACAP,UADA,IAEAA,UAAU,KAAKD,UALT,EAML;AACDK,MAAAA,sBAAsB,CAACG,OAAvB,GAAiC,KAAjC;AACA;;AACD,QAAKL,OAAO,KAAKC,eAAe,CAACI,OAAjC,EAA2C;AAC1CJ,MAAAA,eAAe,CAACI,OAAhB,GAA0BL,OAA1B;AACA;AACD,GA9BQ,EA8BN,CAAED,QAAF,EAAYC,OAAZ,EAAqBV,KAArB,EAA4BO,UAA5B,EAAwCC,UAAxC,CA9BM,CAAT;AA+BA;;AAED,SAASQ,iBAAT,QAgBI;AAAA,MAfHb,QAeG,SAfHA,QAeG;AAAA,MAdHC,SAcG,SAdHA,SAcG;AAAA,+BAbHa,UAaG;AAAA,MAbHA,UAaG,iCAbU5B,EAAE,CAAE,cAAF,CAaZ;AAAA,MAZHkB,UAYG,SAZHA,UAYG;AAAA,MAXHW,MAWG,SAXHA,MAWG;AAAA,MAVHC,eAUG,SAVHA,eAUG;AAAA,MATHC,IASG,SATHA,IASG;AAAA,+BARHC,UAQG;AAAA,MARHA,UAQG,iCARU,IAQV;AAAA,MAPHC,cAOG,SAPHA,cAOG;AAAA,MANHtB,KAMG,SANHA,KAMG;AAAA,MALHuB,gBAKG,SALHA,gBAKG;AAAA,MAJHC,KAIG,SAJHA,KAIG;AAAA,MAHHC,cAGG,SAHHA,cAGG;AAAA,MAFHC,iBAEG,SAFHA,iBAEG;AAAA,mCADHC,cACG;AAAA,MADHA,cACG,qCADc,KACd;;AAAA,mBAC0DvC,SAAS,CACrE,UAAEwC,MAAF,EAAc;AAAA,kBACwCA,MAAM,CAC1D,gBAD0D,CAD9C;AAAA,QACLC,0BADK,WACLA,0BADK;AAAA,QACuBC,YADvB,WACuBA,YADvB;;AAIb,QAAMC,WAAW,GAAGF,0BAA0B,CAAE7B,KAAF,CAA9C;;AACA,WAAO;AACNS,MAAAA,QAAQ,EAAEsB,WAAW,KAAKxB,UADpB;AAENyB,MAAAA,QAAQ,EAAEF,YAAY,CAAE9B,KAAF,EAASO,UAAT,CAFhB;AAGNC,MAAAA,UAAU,EAAEuB,WAHN;AAINrB,MAAAA,OAAO,EAAEkB,MAAM,CAAE,eAAF,CAAN,CAA0BK,eAA1B,CACR,UADQ,CAJH;AAONC,MAAAA,OAAO,EAAEN,MAAM,CAAE,eAAF,CAAN,CAA0BK,eAA1B,CAA2C,OAA3C;AAPH,KAAP;AASA,GAfoE,EAgBrE,CAAE1B,UAAF,EAAcP,KAAd,CAhBqE,CADnE;AAAA,MACKS,QADL,cACKA,QADL;AAAA,MACeuB,QADf,cACeA,QADf;AAAA,MACyBxB,UADzB,cACyBA,UADzB;AAAA,MACqCE,OADrC,cACqCA,OADrC;AAAA,MAC8CwB,OAD9C,cAC8CA,OAD9C;;AAmBH5B,EAAAA,8BAA8B,CAC7BN,KAD6B,EAE7BO,UAF6B,EAG7BC,UAH6B,EAI7BC,QAJ6B,EAK7BC,OAL6B,CAA9B;;AAnBG,sBA+BCvB,WAAW,CAAE,gBAAF,CA/BZ;AAAA,MA2BF0B,uBA3BE,iBA2BFA,uBA3BE;AAAA,MA4BFC,wBA5BE,iBA4BFA,wBA5BE;AAAA,MA6BFqB,OA7BE,iBA6BFA,OA7BE;AAAA,MA8BFC,SA9BE,iBA8BFA,SA9BE;;AAiCH3C,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAKiC,iBAAiB,IAAIlB,UAAU,KAAK6B,SAApC,IAAiD,CAAE3B,OAAxD,EAAkE;AACjEG,MAAAA,uBAAuB,CAAEb,KAAF,EAASO,UAAT,CAAvB;AACA;AACD,GAJQ,EAIN,CAAEC,UAAF,EAAckB,iBAAd,EAAiC1B,KAAjC,EAAwCO,UAAxC,EAAoDG,OAApD,CAJM,CAAT;AAMA,SACC,8BACGsB,QAAQ,IAAIX,UAAZ,IACD,cAAC,WAAD;AAAa,IAAA,KAAK,EAAGrB;AAArB,KACC,cAAC,uBAAD;AACC,IAAA,KAAK,EAAGA,KADT;AAEC,IAAA,UAAU,EAAGO,UAFd;AAGC,IAAA,SAAS,EACRE,QAAQ,KAAM,CAAEkB,cAAF,IAAoBO,OAA1B,CAJV;AAMC,qBAAgBzB,QANjB;AAOC,IAAA,KAAK,EAAGe,KAPT;AAQC,IAAA,IAAI,EAAGG,cAAc,GAAGrC,KAAH,GAAW8B,IARjC;AASC,IAAA,WAAW,EAAG,CAAEO,cATjB;AAUC,IAAA,UAAU,EAAGA;AAVd,IADD,CAFF,EAiBGlB,QAAQ,IACT,cAAC,qBAAD;AACC,IAAA,SAAS,EAAG5B,UAAU,CACrB,8BADqB,EAErBuB,SAFqB,CADvB;AAKC,IAAA,KAAK,EAAGJ;AALT,KAOC,cAAC,uBAAD;AACC,IAAA,SAAS,EAAGmB,eADb;AAEC,IAAA,UAAU,EAAGF,UAFd;AAGC,IAAA,OAAO,EAAG;AAAA,aAAMH,wBAAwB,CAAEd,KAAF,CAA9B;AAAA,KAHX;AAIC,IAAA,gBAAgB,EAAGuB,gBAJpB;AAKC,IAAA,iBAAiB,EAAG;AACnBe,MAAAA,KAAK,EAAErB,UADY;AAEnBsB,MAAAA,QAAQ,EAAEd,cAFS;AAGnBzB,MAAAA,KAAK,EAALA,KAHmB;AAInBO,MAAAA,UAAU,EAAVA;AAJmB;AALrB,KAYGW,MAAM,IACP,8BACC,8BAAUM,KAAV,CADD,EAEGH,UAAU,IACX,cAAC,MAAD;AACC,IAAA,SAAS,EAAC,8CADX;AAEC,IAAA,IAAI,EACHW,QAAQ,GAAGxC,UAAH,GAAgBD,SAH1B;AAKC,IAAA,KAAK,EACJyC,QAAQ,GACL3C,EAAE,CAAE,oBAAF,CADG,GAELA,EAAE,CAAE,gBAAF,CARP;AAUC,IAAA,OAAO,EAAG;AAAA,aACT,CAAE2C,QAAQ,GAAGI,SAAH,GAAeD,OAAzB,EACCnC,KADD,EAECO,UAFD,CADS;AAAA,KAVX;AAgBC,IAAA,SAAS,EAAGyB,QAhBb;AAiBC,qBAAgBA;AAjBjB,IAHF,CAbF,CAPD,EA8CC,cAAC,KAAD;AAAO,IAAA,SAAS,EAAGV;AAAnB,KAAsCnB,QAAtC,CA9CD,CAlBF,CADD;AAsEA;;AAED,IAAMqC,wBAAwB,GAAG3C,4BAA4B,CAC5DmB,iBAD4D,CAA7D;AAIAwB,wBAAwB,CAACvD,IAAzB,GAAgCc,qBAAhC;AAEA,eAAeyC,wBAAf","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { Animate, Button, Panel, Slot, Fill } from '@wordpress/components';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __ } from '@wordpress/i18n';\nimport { check, starEmpty, starFilled } from '@wordpress/icons';\nimport { useEffect, useRef } from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport ComplementaryAreaHeader from '../complementary-area-header';\nimport ComplementaryAreaToggle from '../complementary-area-toggle';\nimport withComplementaryAreaContext from '../complementary-area-context';\nimport PinnedItems from '../pinned-items';\n\nfunction ComplementaryAreaSlot( { scope, ...props } ) {\n\treturn <Slot name={ `ComplementaryArea/${ scope }` } { ...props } />;\n}\n\nfunction ComplementaryAreaFill( { scope, children, className } ) {\n\treturn (\n\t\t<Fill name={ `ComplementaryArea/${ scope }` }>\n\t\t\t<Animate type=\"slide-in\" options={ { origin: 'left' } }>\n\t\t\t\t{ () => <div className={ className }>{ children }</div> }\n\t\t\t</Animate>\n\t\t</Fill>\n\t);\n}\n\nfunction useAdjustComplementaryListener(\n\tscope,\n\tidentifier,\n\tactiveArea,\n\tisActive,\n\tisSmall\n) {\n\tconst previousIsSmall = useRef( false );\n\tconst shouldOpenWhenNotSmall = useRef( false );\n\tconst { enableComplementaryArea, disableComplementaryArea } = useDispatch(\n\t\t'core/interface'\n\t);\n\tuseEffect( () => {\n\t\t// If the complementary area is active and the editor is switching from a big to a small window size.\n\t\tif ( isActive && isSmall && ! previousIsSmall.current ) {\n\t\t\t// Disable the complementary area.\n\t\t\tdisableComplementaryArea( scope );\n\t\t\t// Flag the complementary area to be reopened when the window size goes from small to big.\n\t\t\tshouldOpenWhenNotSmall.current = true;\n\t\t} else if (\n\t\t\t// If there is a flag indicating the complementary area should be enabled when we go from small to big window size\n\t\t\t// and we are going from a small to big window size.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\t! isSmall &&\n\t\t\tpreviousIsSmall.current\n\t\t) {\n\t\t\t// Remove the flag indicating the complementary area should be enabled.\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t\t// Enable the complementary area.\n\t\t\tenableComplementaryArea( scope, identifier );\n\t\t} else if (\n\t\t\t// If the flag is indicating the current complementary should be reopened but another complementary area becomes active,\n\t\t\t// remove the flag.\n\t\t\tshouldOpenWhenNotSmall.current &&\n\t\t\tactiveArea &&\n\t\t\tactiveArea !== identifier\n\t\t) {\n\t\t\tshouldOpenWhenNotSmall.current = false;\n\t\t}\n\t\tif ( isSmall !== previousIsSmall.current ) {\n\t\t\tpreviousIsSmall.current = isSmall;\n\t\t}\n\t}, [ isActive, isSmall, scope, identifier, activeArea ] );\n}\n\nfunction ComplementaryArea( {\n\tchildren,\n\tclassName,\n\tcloseLabel = __( 'Close plugin' ),\n\tidentifier,\n\theader,\n\theaderClassName,\n\ticon,\n\tisPinnable = true,\n\tpanelClassName,\n\tscope,\n\tsmallScreenTitle,\n\ttitle,\n\ttoggleShortcut,\n\tisActiveByDefault,\n\tshowIconLabels = false,\n} ) {\n\tconst { isActive, isPinned, activeArea, isSmall, isLarge } = useSelect(\n\t\t( select ) => {\n\t\t\tconst { getActiveComplementaryArea, isItemPinned } = select(\n\t\t\t\t'core/interface'\n\t\t\t);\n\t\t\tconst _activeArea = getActiveComplementaryArea( scope );\n\t\t\treturn {\n\t\t\t\tisActive: _activeArea === identifier,\n\t\t\t\tisPinned: isItemPinned( scope, identifier ),\n\t\t\t\tactiveArea: _activeArea,\n\t\t\t\tisSmall: select( 'core/viewport' ).isViewportMatch(\n\t\t\t\t\t'< medium'\n\t\t\t\t),\n\t\t\t\tisLarge: select( 'core/viewport' ).isViewportMatch( 'large' ),\n\t\t\t};\n\t\t},\n\t\t[ identifier, scope ]\n\t);\n\tuseAdjustComplementaryListener(\n\t\tscope,\n\t\tidentifier,\n\t\tactiveArea,\n\t\tisActive,\n\t\tisSmall\n\t);\n\tconst {\n\t\tenableComplementaryArea,\n\t\tdisableComplementaryArea,\n\t\tpinItem,\n\t\tunpinItem,\n\t} = useDispatch( 'core/interface' );\n\n\tuseEffect( () => {\n\t\tif ( isActiveByDefault && activeArea === undefined && ! isSmall ) {\n\t\t\tenableComplementaryArea( scope, identifier );\n\t\t}\n\t}, [ activeArea, isActiveByDefault, scope, identifier, isSmall ] );\n\n\treturn (\n\t\t<>\n\t\t\t{ isPinned && isPinnable && (\n\t\t\t\t<PinnedItems scope={ scope }>\n\t\t\t\t\t<ComplementaryAreaToggle\n\t\t\t\t\t\tscope={ scope }\n\t\t\t\t\t\tidentifier={ identifier }\n\t\t\t\t\t\tisPressed={\n\t\t\t\t\t\t\tisActive && ( ! showIconLabels || isLarge )\n\t\t\t\t\t\t}\n\t\t\t\t\t\taria-expanded={ isActive }\n\t\t\t\t\t\tlabel={ title }\n\t\t\t\t\t\ticon={ showIconLabels ? check : icon }\n\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t/>\n\t\t\t\t</PinnedItems>\n\t\t\t) }\n\t\t\t{ isActive && (\n\t\t\t\t<ComplementaryAreaFill\n\t\t\t\t\tclassName={ classnames(\n\t\t\t\t\t\t'interface-complementary-area',\n\t\t\t\t\t\tclassName\n\t\t\t\t\t) }\n\t\t\t\t\tscope={ scope }\n\t\t\t\t>\n\t\t\t\t\t<ComplementaryAreaHeader\n\t\t\t\t\t\tclassName={ headerClassName }\n\t\t\t\t\t\tcloseLabel={ closeLabel }\n\t\t\t\t\t\tonClose={ () => disableComplementaryArea( scope ) }\n\t\t\t\t\t\tsmallScreenTitle={ smallScreenTitle }\n\t\t\t\t\t\ttoggleButtonProps={ {\n\t\t\t\t\t\t\tlabel: closeLabel,\n\t\t\t\t\t\t\tshortcut: toggleShortcut,\n\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\tidentifier,\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ header || (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<strong>{ title }</strong>\n\t\t\t\t\t\t\t\t{ isPinnable && (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tclassName=\"interface-complementary-area__pin-unpin-item\"\n\t\t\t\t\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\t\t\t\t\tisPinned ? starFilled : starEmpty\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\tisPinned\n\t\t\t\t\t\t\t\t\t\t\t\t? __( 'Unpin from toolbar' )\n\t\t\t\t\t\t\t\t\t\t\t\t: __( 'Pin to toolbar' )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\t( isPinned ? unpinItem : pinItem )(\n\t\t\t\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\t\t\t\tidentifier\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisPressed={ isPinned }\n\t\t\t\t\t\t\t\t\t\taria-expanded={ isPinned }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</ComplementaryAreaHeader>\n\t\t\t\t\t<Panel className={ panelClassName }>{ children }</Panel>\n\t\t\t\t</ComplementaryAreaFill>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nconst ComplementaryAreaWrapped = withComplementaryAreaContext(\n\tComplementaryArea\n);\n\nComplementaryAreaWrapped.Slot = ComplementaryAreaSlot;\n\nexport default ComplementaryAreaWrapped;\n"]}