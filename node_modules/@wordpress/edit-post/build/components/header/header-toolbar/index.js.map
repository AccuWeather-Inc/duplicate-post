{"version":3,"sources":["@wordpress/edit-post/src/components/header/header-toolbar/index.js"],"names":["HeaderToolbar","inserterButton","setIsInserterOpened","select","hasInserterItems","getBlockRootClientId","getBlockSelectionEnd","hasFixedToolbar","isFeatureActive","isInserterEnabled","getEditorMode","getEditorSettings","richEditingEnabled","isInserterOpened","isTextModeEnabled","previewDeviceType","__experimentalGetPreviewDeviceType","showIconLabels","isNavigationTool","isNavigationMode","hasReducedUI","isLargeViewport","isWideViewport","isSmallViewport","setNavigationMode","displayBlockToolbar","toolbarAriaLabel","onSwitchMode","mode","overflowItems","TableOfContents","BlockNavigationDropdown","Button","event","preventDefault","current","focus","plus","ToolSelector","EditorHistoryUndo","EditorHistoryRedo","value","label"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\tBlockToolbar,\n\tNavigableToolbar,\n\tBlockNavigationDropdown,\n\tToolSelector,\n} from '@wordpress/block-editor';\nimport {\n\tTableOfContents,\n\tEditorHistoryRedo,\n\tEditorHistoryUndo,\n} from '@wordpress/editor';\nimport {\n\tButton,\n\tDropdownMenu,\n\tToolbarItem,\n\tMenuItemsChoice,\n\tMenuGroup,\n} from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\nimport { useRef } from '@wordpress/element';\n\nfunction HeaderToolbar() {\n\tconst inserterButton = useRef();\n\tconst { setIsInserterOpened } = useDispatch( 'core/edit-post' );\n\tconst {\n\t\thasReducedUI,\n\t\thasFixedToolbar,\n\t\tisInserterEnabled,\n\t\tisInserterOpened,\n\t\tisTextModeEnabled,\n\t\tpreviewDeviceType,\n\t\tshowIconLabels,\n\t\tisNavigationTool,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\thasInserterItems,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockSelectionEnd,\n\t\t} = select( 'core/block-editor' );\n\t\treturn {\n\t\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\t\tisInserterEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'visual' &&\n\t\t\t\tselect( 'core/editor' ).getEditorSettings()\n\t\t\t\t\t.richEditingEnabled &&\n\t\t\t\thasInserterItems(\n\t\t\t\t\tgetBlockRootClientId( getBlockSelectionEnd() )\n\t\t\t\t),\n\t\t\tisInserterOpened: select( 'core/edit-post' ).isInserterOpened(),\n\t\t\tisTextModeEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'text',\n\t\t\tpreviewDeviceType: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).__experimentalGetPreviewDeviceType(),\n\t\t\tshowIconLabels: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'showIconLabels'\n\t\t\t),\n\t\t\tisNavigationTool: select( 'core/block-editor' ).isNavigationMode(),\n\t\t\thasReducedUI: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'reducedUI'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst isWideViewport = useViewportMatch( 'wide' );\n\tconst isSmallViewport = useViewportMatch( 'small', '<' );\n\tconst { setNavigationMode } = useDispatch( 'core/block-editor' );\n\n\tconst displayBlockToolbar =\n\t\t! isLargeViewport || previewDeviceType !== 'Desktop' || hasFixedToolbar;\n\n\tconst toolbarAriaLabel = displayBlockToolbar\n\t\t? /* translators: accessibility text for the editor toolbar when Top Toolbar is on */\n\t\t  __( 'Document and block tools' )\n\t\t: /* translators: accessibility text for the editor toolbar when Top Toolbar is off */\n\t\t  __( 'Document tools' );\n\n\tconst onSwitchMode = ( mode ) => {\n\t\tsetNavigationMode( mode === 'edit' ? false : true );\n\t};\n\n\tconst overflowItems = (\n\t\t<>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ TableOfContents }\n\t\t\t\thasOutlineItemsDisabled={ isTextModeEnabled }\n\t\t\t\trepositionDropdown={ showIconLabels && ! isWideViewport }\n\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t/>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ BlockNavigationDropdown }\n\t\t\t\tisDisabled={ isTextModeEnabled }\n\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t/>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tclassName=\"edit-post-header-toolbar\"\n\t\t\taria-label={ toolbarAriaLabel }\n\t\t>\n\t\t\t<div className=\"edit-post-header-toolbar__left\">\n\t\t\t\t<ToolbarItem\n\t\t\t\t\tref={ inserterButton }\n\t\t\t\t\tas={ Button }\n\t\t\t\t\tclassName=\"edit-post-header-toolbar__inserter-toggle\"\n\t\t\t\t\tisPrimary\n\t\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t} }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tif ( isInserterOpened ) {\n\t\t\t\t\t\t\t// Focusing the inserter button closes the inserter popover\n\t\t\t\t\t\t\tinserterButton.current.focus();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetIsInserterOpened( true );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tdisabled={ ! isInserterEnabled }\n\t\t\t\t\ticon={ plus }\n\t\t\t\t\t/* translators: button label text should, if possible, be under 16\n\t\t\tcharacters. */\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Add block',\n\t\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t\t) }\n\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t>\n\t\t\t\t\t{ showIconLabels && __( 'Add' ) }\n\t\t\t\t</ToolbarItem>\n\t\t\t\t{ ! hasReducedUI && ( isWideViewport || ! showIconLabels ) && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ isLargeViewport && (\n\t\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\t\tas={ ToolSelector }\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\tdisabled={ isTextModeEnabled }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryUndo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryRedo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ overflowItems }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ ! hasReducedUI &&\n\t\t\t\t\t! isWideViewport &&\n\t\t\t\t\t! isSmallViewport &&\n\t\t\t\t\tshowIconLabels && (\n\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16\n\tcharacters. */\n\t\t\t\t\t\t\t\t__( 'Tools' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ () => (\n\t\t\t\t\t\t\t\t<div className=\"edit-post-header__dropdown\">\n\t\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Modes' ) }>\n\t\t\t\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\tisNavigationTool\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'select'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'edit'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonSelect={ onSwitchMode }\n\t\t\t\t\t\t\t\t\t\t\tchoices={ [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: __( 'Edit' ),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'select',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: __( 'Select' ),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Edit' ) }>\n\t\t\t\t\t\t\t\t\t\t<EditorHistoryUndo\n\t\t\t\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<EditorHistoryRedo\n\t\t\t\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuGroup>{ overflowItems }</MenuGroup>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t{ displayBlockToolbar && (\n\t\t\t\t<div className=\"edit-post-header-toolbar__block-toolbar\">\n\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default HeaderToolbar;\n"]}