{"version":3,"sources":["@wordpress/edit-post/src/components/header/header-toolbar/index.js"],"names":["useViewportMatch","useSelect","useDispatch","__","_x","BlockToolbar","NavigableToolbar","BlockNavigationDropdown","ToolSelector","TableOfContents","EditorHistoryRedo","EditorHistoryUndo","Button","DropdownMenu","ToolbarItem","MenuItemsChoice","MenuGroup","plus","useRef","HeaderToolbar","inserterButton","setIsInserterOpened","select","hasInserterItems","getBlockRootClientId","getBlockSelectionEnd","hasFixedToolbar","isFeatureActive","isInserterEnabled","getEditorMode","getEditorSettings","richEditingEnabled","isInserterOpened","isTextModeEnabled","previewDeviceType","__experimentalGetPreviewDeviceType","showIconLabels","isNavigationTool","isNavigationMode","hasReducedUI","isLargeViewport","isWideViewport","isSmallViewport","setNavigationMode","displayBlockToolbar","toolbarAriaLabel","onSwitchMode","mode","overflowItems","event","preventDefault","current","focus","value","label"],"mappings":"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","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useViewportMatch } from '@wordpress/compose';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport { __, _x } from '@wordpress/i18n';\nimport {\n\tBlockToolbar,\n\tNavigableToolbar,\n\tBlockNavigationDropdown,\n\tToolSelector,\n} from '@wordpress/block-editor';\nimport {\n\tTableOfContents,\n\tEditorHistoryRedo,\n\tEditorHistoryUndo,\n} from '@wordpress/editor';\nimport {\n\tButton,\n\tDropdownMenu,\n\tToolbarItem,\n\tMenuItemsChoice,\n\tMenuGroup,\n} from '@wordpress/components';\nimport { plus } from '@wordpress/icons';\nimport { useRef } from '@wordpress/element';\n\nfunction HeaderToolbar() {\n\tconst inserterButton = useRef();\n\tconst { setIsInserterOpened } = useDispatch( 'core/edit-post' );\n\tconst {\n\t\thasReducedUI,\n\t\thasFixedToolbar,\n\t\tisInserterEnabled,\n\t\tisInserterOpened,\n\t\tisTextModeEnabled,\n\t\tpreviewDeviceType,\n\t\tshowIconLabels,\n\t\tisNavigationTool,\n\t} = useSelect( ( select ) => {\n\t\tconst {\n\t\t\thasInserterItems,\n\t\t\tgetBlockRootClientId,\n\t\t\tgetBlockSelectionEnd,\n\t\t} = select( 'core/block-editor' );\n\t\treturn {\n\t\t\thasFixedToolbar: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'fixedToolbar'\n\t\t\t),\n\t\t\t// This setting (richEditingEnabled) should not live in the block editor's setting.\n\t\t\tisInserterEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'visual' &&\n\t\t\t\tselect( 'core/editor' ).getEditorSettings()\n\t\t\t\t\t.richEditingEnabled &&\n\t\t\t\thasInserterItems(\n\t\t\t\t\tgetBlockRootClientId( getBlockSelectionEnd() )\n\t\t\t\t),\n\t\t\tisInserterOpened: select( 'core/edit-post' ).isInserterOpened(),\n\t\t\tisTextModeEnabled:\n\t\t\t\tselect( 'core/edit-post' ).getEditorMode() === 'text',\n\t\t\tpreviewDeviceType: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).__experimentalGetPreviewDeviceType(),\n\t\t\tshowIconLabels: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'showIconLabels'\n\t\t\t),\n\t\t\tisNavigationTool: select( 'core/block-editor' ).isNavigationMode(),\n\t\t\thasReducedUI: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'reducedUI'\n\t\t\t),\n\t\t};\n\t}, [] );\n\tconst isLargeViewport = useViewportMatch( 'medium' );\n\tconst isWideViewport = useViewportMatch( 'wide' );\n\tconst isSmallViewport = useViewportMatch( 'small', '<' );\n\tconst { setNavigationMode } = useDispatch( 'core/block-editor' );\n\n\tconst displayBlockToolbar =\n\t\t! isLargeViewport || previewDeviceType !== 'Desktop' || hasFixedToolbar;\n\n\tconst toolbarAriaLabel = displayBlockToolbar\n\t\t? /* translators: accessibility text for the editor toolbar when Top Toolbar is on */\n\t\t  __( 'Document and block tools' )\n\t\t: /* translators: accessibility text for the editor toolbar when Top Toolbar is off */\n\t\t  __( 'Document tools' );\n\n\tconst onSwitchMode = ( mode ) => {\n\t\tsetNavigationMode( mode === 'edit' ? false : true );\n\t};\n\n\tconst overflowItems = (\n\t\t<>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ TableOfContents }\n\t\t\t\thasOutlineItemsDisabled={ isTextModeEnabled }\n\t\t\t\trepositionDropdown={ showIconLabels && ! isWideViewport }\n\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t/>\n\t\t\t<ToolbarItem\n\t\t\t\tas={ BlockNavigationDropdown }\n\t\t\t\tisDisabled={ isTextModeEnabled }\n\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t/>\n\t\t</>\n\t);\n\n\treturn (\n\t\t<NavigableToolbar\n\t\t\tclassName=\"edit-post-header-toolbar\"\n\t\t\taria-label={ toolbarAriaLabel }\n\t\t>\n\t\t\t<div className=\"edit-post-header-toolbar__left\">\n\t\t\t\t<ToolbarItem\n\t\t\t\t\tref={ inserterButton }\n\t\t\t\t\tas={ Button }\n\t\t\t\t\tclassName=\"edit-post-header-toolbar__inserter-toggle\"\n\t\t\t\t\tisPrimary\n\t\t\t\t\tisPressed={ isInserterOpened }\n\t\t\t\t\tonMouseDown={ ( event ) => {\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t} }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tif ( isInserterOpened ) {\n\t\t\t\t\t\t\t// Focusing the inserter button closes the inserter popover\n\t\t\t\t\t\t\tinserterButton.current.focus();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetIsInserterOpened( true );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t\tdisabled={ ! isInserterEnabled }\n\t\t\t\t\ticon={ plus }\n\t\t\t\t\t/* translators: button label text should, if possible, be under 16\n\t\t\tcharacters. */\n\t\t\t\t\tlabel={ _x(\n\t\t\t\t\t\t'Add block',\n\t\t\t\t\t\t'Generic label for block inserter button'\n\t\t\t\t\t) }\n\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t>\n\t\t\t\t\t{ showIconLabels && __( 'Add' ) }\n\t\t\t\t</ToolbarItem>\n\t\t\t\t{ ! hasReducedUI && ( isWideViewport || ! showIconLabels ) && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ isLargeViewport && (\n\t\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\t\tas={ ToolSelector }\n\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\tdisabled={ isTextModeEnabled }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryUndo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<ToolbarItem\n\t\t\t\t\t\t\tas={ EditorHistoryRedo }\n\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ overflowItems }\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ ! hasReducedUI &&\n\t\t\t\t\t! isWideViewport &&\n\t\t\t\t\t! isSmallViewport &&\n\t\t\t\t\tshowIconLabels && (\n\t\t\t\t\t\t<DropdownMenu\n\t\t\t\t\t\t\tposition=\"bottom right\"\n\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t/* translators: button label text should, if possible, be under 16\n\tcharacters. */\n\t\t\t\t\t\t\t\t__( 'Tools' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ () => (\n\t\t\t\t\t\t\t\t<div className=\"edit-post-header__dropdown\">\n\t\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Modes' ) }>\n\t\t\t\t\t\t\t\t\t\t<MenuItemsChoice\n\t\t\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\t\t\tisNavigationTool\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'select'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'edit'\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tonSelect={ onSwitchMode }\n\t\t\t\t\t\t\t\t\t\t\tchoices={ [\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'edit',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: __( 'Edit' ),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: 'select',\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: __( 'Select' ),\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t] }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuGroup label={ __( 'Edit' ) }>\n\t\t\t\t\t\t\t\t\t\t<EditorHistoryUndo\n\t\t\t\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<EditorHistoryRedo\n\t\t\t\t\t\t\t\t\t\t\tshowTooltip={ ! showIconLabels }\n\t\t\t\t\t\t\t\t\t\t\tisTertiary={ showIconLabels }\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</MenuGroup>\n\t\t\t\t\t\t\t\t\t<MenuGroup>{ overflowItems }</MenuGroup>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</DropdownMenu>\n\t\t\t\t\t) }\n\t\t\t</div>\n\n\t\t\t{ displayBlockToolbar && (\n\t\t\t\t<div className=\"edit-post-header-toolbar__block-toolbar\">\n\t\t\t\t\t<BlockToolbar hideDragHandle />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t</NavigableToolbar>\n\t);\n}\n\nexport default HeaderToolbar;\n"]}