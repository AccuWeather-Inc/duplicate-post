{"version":3,"sources":["@wordpress/edit-post/src/components/header/index.js"],"names":["PostSavedState","PostPreviewButton","useSelect","PinnedItems","__experimentalMainDashboardButton","MainDashboardButton","useViewportMatch","FullscreenModeClose","HeaderToolbar","MoreMenu","PostPublishButtonOrToggle","default","DevicePreview","Header","setEntitiesSavedStatesCallback","select","hasActiveMetaboxes","hasMetaBoxes","isPublishSidebarOpened","isSaving","isSavingMetaBoxes","showIconLabels","isFeatureActive","hasReducedUI","isLargeViewport","undefined"],"mappings":";;AAAA;;;AAGA,SAASA,cAAT,EAAyBC,iBAAzB,QAAkD,mBAAlD;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,SACCC,WADD,EAECC,iCAAiC,IAAIC,mBAFtC,QAGO,sBAHP;AAIA,SAASC,gBAAT,QAAiC,oBAAjC;AAEA;;;;AAGA,OAAOC,mBAAP,MAAgC,yBAAhC;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,yBAAP,MAAsC,iCAAtC;AACA,SAASC,OAAO,IAAIC,aAApB,QAAyC,mBAAzC;;AAEA,SAASC,MAAT,OAAsD;AAAA,MAAnCC,8BAAmC,QAAnCA,8BAAmC;;AAAA,mBAOjDZ,SAAS,CACZ,UAAEa,MAAF;AAAA,WAAgB;AACfC,MAAAA,kBAAkB,EAAED,MAAM,CAAE,gBAAF,CAAN,CAA2BE,YAA3B,EADL;AAEfC,MAAAA,sBAAsB,EAAEH,MAAM,CAC7B,gBAD6B,CAAN,CAEtBG,sBAFsB,EAFT;AAKfC,MAAAA,QAAQ,EAAEJ,MAAM,CAAE,gBAAF,CAAN,CAA2BK,iBAA3B,EALK;AAMfC,MAAAA,cAAc,EAAEN,MAAM,CAAE,gBAAF,CAAN,CAA2BO,eAA3B,CACf,gBADe,CAND;AASfC,MAAAA,YAAY,EAAER,MAAM,CAAE,gBAAF,CAAN,CAA2BO,eAA3B,CACb,WADa;AATC,KAAhB;AAAA,GADY,EAcZ,EAdY,CAPwC;AAAA,MAEpDN,kBAFoD,cAEpDA,kBAFoD;AAAA,MAGpDE,sBAHoD,cAGpDA,sBAHoD;AAAA,MAIpDC,QAJoD,cAIpDA,QAJoD;AAAA,MAKpDE,cALoD,cAKpDA,cALoD;AAAA,MAMpDE,YANoD,cAMpDA,YANoD;;AAwBrD,MAAMC,eAAe,GAAGlB,gBAAgB,CAAE,OAAF,CAAxC;AAEA,SACC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,mBAAD,CAAqB,IAArB,QACC,cAAC,mBAAD,OADD,CADD,EAIC;AAAK,IAAA,SAAS,EAAC;AAAf,KACC,cAAC,aAAD,OADD,CAJD,EAOC;AAAK,IAAA,SAAS,EAAC;AAAf,KACG,CAAEiB,YAAF,IACD,8BACG,CAAEL,sBAAF,IACD;AACA;AACA;AACA;AACA;AACA,gBAAC,cAAD;AACC,IAAA,YAAY,EAAGF,kBADhB;AAEC,IAAA,aAAa,EAAGG,QAFjB;AAGC,IAAA,cAAc,EAAGE;AAHlB,IAPF,EAaC,cAAC,aAAD,OAbD,EAcC,cAAC,iBAAD;AACC,IAAA,mBAAmB,EAAGL,kBADvB;AAEC,IAAA,gBAAgB,EAAGG,QAAQ,GAAG,IAAH,GAAUM;AAFtC,IAdD,CAFF,EAsBC,cAAC,yBAAD;AACC,IAAA,YAAY,EAAGT,kBADhB;AAEC,IAAA,aAAa,EAAGG,QAFjB;AAGC,IAAA,8BAA8B,EAC7BL;AAJF,IAtBD,EA6BG,CAAEU,eAAe,IAAI,CAAEH,cAAvB,KACD,8BACC,cAAC,WAAD,CAAa,IAAb;AAAkB,IAAA,KAAK,EAAC;AAAxB,IADD,EAEC,cAAC,QAAD;AAAU,IAAA,cAAc,EAAGA;AAA3B,IAFD,CA9BF,EAmCGA,cAAc,IAAI,CAAEG,eAApB,IACD,cAAC,QAAD;AAAU,IAAA,cAAc,EAAGH;AAA3B,IApCF,CAPD,CADD;AAiDA;;AAED,eAAeR,MAAf","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { PostSavedState, PostPreviewButton } from '@wordpress/editor';\nimport { useSelect } from '@wordpress/data';\nimport {\n\tPinnedItems,\n\t__experimentalMainDashboardButton as MainDashboardButton,\n} from '@wordpress/interface';\nimport { useViewportMatch } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport FullscreenModeClose from './fullscreen-mode-close';\nimport HeaderToolbar from './header-toolbar';\nimport MoreMenu from './more-menu';\nimport PostPublishButtonOrToggle from './post-publish-button-or-toggle';\nimport { default as DevicePreview } from '../device-preview';\n\nfunction Header( { setEntitiesSavedStatesCallback } ) {\n\tconst {\n\t\thasActiveMetaboxes,\n\t\tisPublishSidebarOpened,\n\t\tisSaving,\n\t\tshowIconLabels,\n\t\thasReducedUI,\n\t} = useSelect(\n\t\t( select ) => ( {\n\t\t\thasActiveMetaboxes: select( 'core/edit-post' ).hasMetaBoxes(),\n\t\t\tisPublishSidebarOpened: select(\n\t\t\t\t'core/edit-post'\n\t\t\t).isPublishSidebarOpened(),\n\t\t\tisSaving: select( 'core/edit-post' ).isSavingMetaBoxes(),\n\t\t\tshowIconLabels: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'showIconLabels'\n\t\t\t),\n\t\t\thasReducedUI: select( 'core/edit-post' ).isFeatureActive(\n\t\t\t\t'reducedUI'\n\t\t\t),\n\t\t} ),\n\t\t[]\n\t);\n\n\tconst isLargeViewport = useViewportMatch( 'large' );\n\n\treturn (\n\t\t<div className=\"edit-post-header\">\n\t\t\t<MainDashboardButton.Slot>\n\t\t\t\t<FullscreenModeClose />\n\t\t\t</MainDashboardButton.Slot>\n\t\t\t<div className=\"edit-post-header__toolbar\">\n\t\t\t\t<HeaderToolbar />\n\t\t\t</div>\n\t\t\t<div className=\"edit-post-header__settings\">\n\t\t\t\t{ ! hasReducedUI && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t{ ! isPublishSidebarOpened && (\n\t\t\t\t\t\t\t// This button isn't completely hidden by the publish sidebar.\n\t\t\t\t\t\t\t// We can't hide the whole toolbar when the publish sidebar is open because\n\t\t\t\t\t\t\t// we want to prevent mounting/unmounting the PostPublishButtonOrToggle DOM node.\n\t\t\t\t\t\t\t// We track that DOM node to return focus to the PostPublishButtonOrToggle\n\t\t\t\t\t\t\t// when the publish sidebar has been closed.\n\t\t\t\t\t\t\t<PostSavedState\n\t\t\t\t\t\t\t\tforceIsDirty={ hasActiveMetaboxes }\n\t\t\t\t\t\t\t\tforceIsSaving={ isSaving }\n\t\t\t\t\t\t\t\tshowIconLabels={ showIconLabels }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t\t<DevicePreview />\n\t\t\t\t\t\t<PostPreviewButton\n\t\t\t\t\t\t\tforceIsAutosaveable={ hasActiveMetaboxes }\n\t\t\t\t\t\t\tforcePreviewLink={ isSaving ? null : undefined }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t<PostPublishButtonOrToggle\n\t\t\t\t\tforceIsDirty={ hasActiveMetaboxes }\n\t\t\t\t\tforceIsSaving={ isSaving }\n\t\t\t\t\tsetEntitiesSavedStatesCallback={\n\t\t\t\t\t\tsetEntitiesSavedStatesCallback\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t{ ( isLargeViewport || ! showIconLabels ) && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<PinnedItems.Slot scope=\"core/edit-post\" />\n\t\t\t\t\t\t<MoreMenu showIconLabels={ showIconLabels } />\n\t\t\t\t\t</>\n\t\t\t\t) }\n\t\t\t\t{ showIconLabels && ! isLargeViewport && (\n\t\t\t\t\t<MoreMenu showIconLabels={ showIconLabels } />\n\t\t\t\t) }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default Header;\n"]}